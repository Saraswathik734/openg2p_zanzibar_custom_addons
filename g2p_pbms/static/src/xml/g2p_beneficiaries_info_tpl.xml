<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <t t-name="g2p_beneficiaries_info_tpl">
        <div class="g2p-beneficiaries" style="font-size: 18px;">
            <!-- Search input with search and arch buttons -->
            <button type="button" class="btn btn-secondary" t-on-click="searchRegistrants">
                            <i class="fa fa-search"/>
                        </button>
            <t t-if="state.searched">
                <h3><t t-esc="state.title"/></h3>
            </t>
            <table class="table table-bordered" style="width: 100%; font-size: 16px;">
                <thead>
                    <tr>
                        <th><t t-esc="('Unique ID')"/></th>
                        <th><t t-esc="('Registration Date')"/></th>

                        <!-- Conditional columns -->
                        <t t-if="state.target_registry_type === 'farmer'">
                            <th><t t-esc="('Name')"/></th>
                            <th><t t-esc="('Land Area')"/></th>
                            <th><t t-esc="('Cattle Heads')"/></th>
                            <th><t t-esc="('Poultry Heads')"/></th>
                        </t>
                        <t t-if="state.list_workflow_status === 'approved_for_disbursement'">
                            <th><t t-esc="('Bridge Disbursement ID')"/></th>
                            <th><t t-esc="('Bridge Dispatch Timestamp')"/></th>
                            <th><t t-esc="('')"/></th>
                        </t>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="state.records" t-as="record" t-key="record.id">
                        <tr>
                            <td><t t-esc="record.unique_id"/></td>
                            <td><t t-esc="record.registration_date"/></td>

                            <!-- Conditional cells -->
                            <t t-if="state.target_registry_type === 'farmer'">
                                <td><t t-esc="record.name"/></td>
                                <td><t t-esc="record.land_area"/></td>
                                <td><t t-esc="record.no_of_cattle_heads"/></td>
                                <td><t t-esc="record.no_of_poultry_heads"/></td>
                            </t>
                            
                            <t t-if="state.list_workflow_status === 'approved_for_disbursement'">
                                <td><t t-esc="record.bridge_disbursement_id"/></td>
                                <td><t t-esc="record.bridge_dispatch_timestamp"/></td>
                                <td>
                                    <button class="btn btn-sm btn-primary"
                                            t-on-click="() => fetchDisbursementDetails(record.bridge_disbursement_id)">
                                        View Status from Bridge
                                    </button>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>

                <t t-if="state.searched">
                    <div class="o_beneficiary_pager">
                        <button type="button" class="btn btn-secondary" t-on-click="prevPage" t-att-disabled="state.page &lt;= 1">
                            <i class="fa fa-chevron-left"/>
                        </button>
                        <span>
                            <t t-esc="state.page"/> / <t t-esc="state.totalPages"/>
                        </span>
                        <button type="button" class="btn btn-secondary" t-on-click="nextPage" t-att-disabled="state.page &gt;= state.totalPages">
                            <i class="fa fa-chevron-right"/>
                        </button>
                    </div>
                </t>
        </div>
    </t>
</templates>
